<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#1a1a2e" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>Guitar Shred Program</title>
  <link rel="manifest" href="manifest.json" />
  <style>
    :root {
      --bg: #0f0f1a;
      --surface: #1a1a2e;
      --surface2: #22223b;
      --accent: #e63946;
      --accent2: #f4a261;
      --text: #edf2f4;
      --text2: #a8b2c1;
      --border: #2d2d4e;
      --success: #2ec4b6;
      --radius: 12px;
      --radius-sm: 8px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }

    /* ‚îÄ‚îÄ TOP BAR ‚îÄ‚îÄ */
    .topbar {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .topbar h1 { font-size: 1rem; font-weight: 700; letter-spacing: 0.5px; }
    .topbar span { color: var(--accent); }
    .menu-btn { background: none; border: none; color: var(--text); font-size: 1.4rem; cursor: pointer; padding: 4px; }

    /* ‚îÄ‚îÄ NAV TABS ‚îÄ‚îÄ */
    .nav-tabs {
      display: flex;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      overflow-x: auto;
      scrollbar-width: none;
    }
    .nav-tabs::-webkit-scrollbar { display: none; }
    .nav-tab {
      flex: 0 0 auto;
      padding: 10px 16px;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--text2);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      white-space: nowrap;
      transition: all 0.2s;
    }
    .nav-tab.active { color: var(--accent); border-bottom-color: var(--accent); }

    /* ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ */
    main { flex: 1; overflow-y: auto; padding: 16px; padding-bottom: 80px; }

    /* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 12px;
    }
    .card-title { font-size: 1rem; font-weight: 700; margin-bottom: 4px; }
    .card-sub { font-size: 0.78rem; color: var(--text2); margin-bottom: 10px; }

    /* ‚îÄ‚îÄ EXERCISE CARD ‚îÄ‚îÄ */
    .ex-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin-bottom: 14px;
      overflow: hidden;
    }
    .ex-header {
      padding: 14px 16px 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 8px;
    }
    .ex-header-left { flex: 1; }
    .ex-id { font-size: 0.7rem; color: var(--accent); font-weight: 700; letter-spacing: 1px; text-transform: uppercase; }
    .ex-title { font-size: 0.95rem; font-weight: 700; margin: 2px 0 4px; }
    .ex-technique {
      display: inline-block;
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 20px;
      background: var(--surface2);
      color: var(--text2);
      font-weight: 600;
    }
    .ex-chevron { color: var(--text2); font-size: 1.2rem; transition: transform 0.3s; flex-shrink: 0; margin-top: 2px; }
    .ex-card.open .ex-chevron { transform: rotate(180deg); }

    .ex-body { display: none; padding: 0 16px 16px; }
    .ex-card.open .ex-body { display: block; }

    /* ‚îÄ‚îÄ TABLATURE ‚îÄ‚îÄ */
    .tab-container {
      background: #0a0a14;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 12px 10px;
      margin: 12px 0;
      overflow-x: auto;
    }
    .tab-line {
      font-family: 'Courier New', monospace;
      font-size: 0.78rem;
      line-height: 1.8;
      color: #c9d1d9;
      white-space: pre;
    }
    .tab-line .string-name { color: var(--accent2); font-weight: 700; }

    /* ‚îÄ‚îÄ BPM & CONTROLS ‚îÄ‚îÄ */
    .bpm-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 12px 0;
      flex-wrap: wrap;
    }
    .bpm-badge {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 6px 12px;
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--accent2);
    }
    .bpm-label { font-size: 0.72rem; color: var(--text2); }

    /* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 10px 18px;
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
      font-weight: 700;
      cursor: pointer;
      border: none;
      transition: all 0.15s;
      user-select: none;
    }
    .btn-primary { background: var(--accent); color: white; }
    .btn-primary:active { background: #c1121f; }
    .btn-secondary { background: var(--surface2); color: var(--text); border: 1px solid var(--border); }
    .btn-secondary:active { background: var(--border); }
    .btn-success { background: var(--success); color: #0f0f1a; }
    .btn-icon { padding: 10px; border-radius: 50%; }
    .btn:disabled { opacity: 0.4; cursor: not-allowed; }

    .play-row { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; margin-top: 10px; }

    /* ‚îÄ‚îÄ TIP BOX ‚îÄ‚îÄ */
    .tip-box {
      background: rgba(230, 57, 70, 0.08);
      border-left: 3px solid var(--accent);
      border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
      padding: 10px 12px;
      font-size: 0.8rem;
      color: var(--text2);
      margin-top: 10px;
      line-height: 1.5;
    }
    .tip-box strong { color: var(--accent); }

    /* ‚îÄ‚îÄ METRONOME ‚îÄ‚îÄ */
    .metronome-card {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--surface);
      border-top: 1px solid var(--border);
      padding: 10px 16px;
      z-index: 200;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .metro-bpm-display {
      font-size: 1.3rem;
      font-weight: 800;
      color: var(--accent2);
      min-width: 52px;
      text-align: center;
    }
    .metro-controls { display: flex; align-items: center; gap: 6px; flex: 1; }
    .metro-btn { background: var(--surface2); border: 1px solid var(--border); color: var(--text); border-radius: var(--radius-sm); padding: 6px 12px; font-size: 1rem; font-weight: 700; cursor: pointer; }
    .metro-btn:active { background: var(--border); }
    .metro-toggle { background: var(--accent); border: none; color: white; border-radius: 50%; width: 40px; height: 40px; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    .metro-toggle.on { background: var(--success); }
    .metro-pulse {
      width: 10px; height: 10px; border-radius: 50%;
      background: var(--border);
      transition: background 0.05s;
      flex-shrink: 0;
    }
    .metro-pulse.beat { background: var(--accent); }
    .timer-display {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--text2);
      min-width: 42px;
      text-align: right;
    }

    /* ‚îÄ‚îÄ PRINCIPLES PAGE ‚îÄ‚îÄ */
    .principle-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-left: 4px solid var(--accent);
      border-radius: var(--radius);
      padding: 14px 16px;
      margin-bottom: 10px;
    }
    .principle-title { font-size: 0.85rem; font-weight: 800; color: var(--accent); margin-bottom: 4px; }
    .principle-text { font-size: 0.82rem; color: var(--text2); line-height: 1.55; }

    /* ‚îÄ‚îÄ MONTH HEADER ‚îÄ‚îÄ */
    .month-header {
      background: linear-gradient(135deg, var(--surface) 0%, var(--surface2) 100%);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 14px;
    }
    .month-num { font-size: 0.72rem; color: var(--accent); font-weight: 700; letter-spacing: 2px; text-transform: uppercase; }
    .month-title { font-size: 1.1rem; font-weight: 800; margin: 4px 0 6px; }
    .month-obj { font-size: 0.8rem; color: var(--text2); line-height: 1.4; }

    .week-label {
      font-size: 0.78rem;
      font-weight: 700;
      color: var(--accent2);
      letter-spacing: 0.5px;
      margin: 16px 0 8px;
      text-transform: uppercase;
    }

    /* ‚îÄ‚îÄ BACKING TRACKS ‚îÄ‚îÄ */
    .bt-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px 16px;
      margin-bottom: 10px;
    }
    .bt-id { font-size: 0.7rem; color: var(--success); font-weight: 700; letter-spacing: 1px; }
    .bt-title { font-size: 0.95rem; font-weight: 700; margin: 4px 0 8px; }
    .bt-chords { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px; }
    .bt-chord {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 4px 10px;
      font-size: 0.82rem;
      font-weight: 700;
      color: var(--accent2);
    }
    .bt-info { font-size: 0.78rem; color: var(--text2); line-height: 1.6; }
    .bt-search {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-top: 10px;
      padding: 8px 14px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 0.78rem;
      color: var(--text2);
      cursor: pointer;
      text-decoration: none;
    }

    /* ‚îÄ‚îÄ OVERVIEW TABLE ‚îÄ‚îÄ */
    .overview-table { width: 100%; border-collapse: collapse; font-size: 0.78rem; }
    .overview-table th { background: var(--surface2); color: var(--accent); padding: 8px 10px; text-align: left; font-size: 0.72rem; letter-spacing: 0.5px; }
    .overview-table td { padding: 8px 10px; border-bottom: 1px solid var(--border); color: var(--text2); }
    .overview-table tr:last-child td { border-bottom: none; }

    /* ‚îÄ‚îÄ LOADING STATE ‚îÄ‚îÄ */
    .loading {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.82rem;
      color: var(--text2);
      padding: 4px 0;
    }
    .spinner {
      width: 14px; height: 14px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* ‚îÄ‚îÄ PAGE TRANSITIONS ‚îÄ‚îÄ */
    .page { display: none; }
    .page.active { display: block; }

    /* ‚îÄ‚îÄ WEEK TABS ‚îÄ‚îÄ */
    .week-tabs-bar {
      display: flex;
      gap: 6px;
      margin-bottom: 14px;
      overflow-x: auto;
      scrollbar-width: none;
    }
    .week-tabs-bar::-webkit-scrollbar { display: none; }
    .week-tab {
      flex: 0 0 auto;
      padding: 7px 14px;
      border-radius: var(--radius-sm);
      font-size: 0.78rem;
      font-weight: 700;
      background: var(--surface2);
      color: var(--text2);
      cursor: pointer;
      border: 1px solid var(--border);
      transition: all 0.2s;
    }
    .week-tab.active { background: var(--accent); color: white; border-color: var(--accent); }

    /* ‚îÄ‚îÄ WEEK PANELS ‚îÄ‚îÄ */
    .week-panel { display: none; }
    .week-panel.active { display: block; }

    /* ‚îÄ‚îÄ SESSION SECTIONS ‚îÄ‚îÄ */
    .session-section {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin-bottom: 12px;
      overflow: hidden;
    }
    .session-section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 14px;
      background: var(--surface2);
      border-bottom: 1px solid var(--border);
    }
    .session-section-icon { font-size: 1.1rem; }
    .session-section-title { font-size: 0.9rem; font-weight: 800; flex: 1; }
    .session-section-duration { font-size: 0.72rem; color: var(--accent2); font-weight: 700; }
    .session-section-body { padding: 14px; }

    /* ‚îÄ‚îÄ SECTION TIMER ‚îÄ‚îÄ */
    .section-timer {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-left: 8px;
    }
    .stimer-display {
      font-size: 0.85rem;
      font-weight: 800;
      color: var(--success);
      min-width: 38px;
      text-align: center;
    }
    .stimer-btn {
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 6px;
      padding: 3px 7px;
      font-size: 0.8rem;
      cursor: pointer;
    }
    .stimer-btn:active { background: var(--border); }

    /* ‚îÄ‚îÄ WARMUP ITEMS ‚îÄ‚îÄ */
    .warmup-list { display: flex; flex-direction: column; gap: 6px; }
    .warmup-item {
      font-size: 0.82rem;
      color: var(--text2);
      padding: 6px 10px;
      background: var(--surface2);
      border-radius: var(--radius-sm);
    }

    /* ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ */
    .progress-bar {
      height: 4px;
      background: var(--surface2);
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: var(--accent);
      border-radius: 2px;
      transition: width 0.3s;
    }

    /* ‚îÄ‚îÄ SESSION TIMER ‚îÄ‚îÄ */
    .session-bar {
      background: var(--surface2);
      border-radius: var(--radius-sm);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
      font-size: 0.82rem;
    }
    .session-time { font-weight: 800; color: var(--success); font-size: 1rem; }
  </style>
</head>
<body>

<div class="topbar">
  <h1>üé∏ <span>Shred</span> Program</h1>
  <div style="display:flex;gap:8px;align-items:center">
    <span id="audioStatus" class="loading" style="display:none">
      <span class="spinner"></span> <span>Caricamento audio‚Ä¶</span>
    </span>
  </div>
</div>

<nav class="nav-tabs" id="navTabs">
  <div class="nav-tab active" data-page="home">Home</div>
  <div class="nav-tab" data-page="tecnica">Tecnica</div>
  <div class="nav-tab" data-page="m1">Mese 1</div>
  <div class="nav-tab" data-page="m2">Mese 2</div>
  <div class="nav-tab" data-page="m3">Mese 3</div>
  <div class="nav-tab" data-page="m4">Mese 4</div>
  <div class="nav-tab" data-page="melodic">Melodici</div>
  <div class="nav-tab" data-page="backing">Backing</div>
  <div class="nav-tab" data-page="progress">Progressi</div>
</nav>

<main id="mainContent">
  <!-- HOME PAGE -->
  <div class="page active" id="page-home">
    <div class="card" style="background:linear-gradient(135deg,#1a1a2e,#22223b);border-color:#e63946">
      <div style="font-size:0.72rem;color:var(--accent);font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:6px">Guitar Shred Program</div>
      <div style="font-size:1.2rem;font-weight:800;margin-bottom:4px">4 Mesi verso la Meccanica Perfetta</div>
      <div style="font-size:0.82rem;color:var(--text2)">Obiettivo: Another Day ‚Äì Dream Theater</div>
    </div>

    <div class="session-bar">
      <span>‚è± Sessione corrente</span>
      <span class="session-time" id="sessionTimer">00:00</span>
      <button class="btn btn-secondary" style="padding:4px 10px;font-size:0.75rem" id="sessionToggle">Start</button>
    </div>

    <div style="font-size:0.82rem;font-weight:700;color:var(--text2);margin-bottom:10px;text-transform:uppercase;letter-spacing:0.5px">Struttura Sessione</div>
    <div id="sessionStructure"></div>

    <div style="font-size:0.82rem;font-weight:700;color:var(--text2);margin:16px 0 10px;text-transform:uppercase;letter-spacing:0.5px">5 Regole Fondamentali</div>
    <div id="principlesContainer"></div>

    <div style="font-size:0.82rem;font-weight:700;color:var(--text2);margin:16px 0 10px;text-transform:uppercase;letter-spacing:0.5px">Panoramica Programma</div>
    <div class="card" style="padding:0;overflow:hidden">
      <table class="overview-table">
        <thead><tr><th>Mese</th><th>Settimane</th><th>Tecniche</th><th>BPM</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>1‚Äì4</td><td>Pick Slanting, Burst Training, 3NPC</td><td>95‚Üí120</td></tr>
          <tr><td>2</td><td>5‚Äì8</td><td>Sestine, Legato veloce, Combo</td><td>80 sestine / 110‚Üí140</td></tr>
          <tr><td>3</td><td>9‚Äì12</td><td>Burst estremo, Pattern Another Day</td><td>120‚Üí145</td></tr>
          <tr><td>4</td><td>13‚Äì16</td><td>Another Day a tempo, Frasi complete</td><td>130‚Üí150</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- TECNICA PAGE -->
  <div class="page" id="page-tecnica">

    <div class="card" style="background:linear-gradient(135deg,#1a1a2e,#22223b);border-color:#e63946">
      <div style="font-size:0.72rem;color:var(--accent);font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:6px">Fondamenta Tecniche</div>
      <div style="font-size:1.2rem;font-weight:800;margin-bottom:4px">Pick Slanting & TWPS</div>
      <div style="font-size:0.82rem;color:var(--text2)">La meccanica alla base della velocit√† ‚Äî Troy Grady / Cracking the Code</div>
    </div>

    <!-- SEZIONE 1: IL PROBLEMA -->
    <div style="font-size:0.82rem;font-weight:700;color:var(--text2);margin:16px 0 10px;text-transform:uppercase;letter-spacing:0.5px">Il Problema: Perch√© il Picking Si Blocca</div>

    <div class="principle-card">
      <div class="principle-title">Il Plettro si Incaglia</div>
      <div class="principle-text">Quando fai alternate picking ad alta velocit√†, il plettro deve attraversare la corda due volte per ogni nota: una volta in discesa (down stroke) e una volta in salita (up stroke). Il problema √® geometrico: se il plettro √® piatto rispetto alle corde, dopo ogni colpo si trova <em>sotto</em> la corda successiva ‚Äî bloccato. Devi "scavare fuori" con forza, il che crea resistenza, rumore e limite di velocit√†.</div>
    </div>

    <div class="principle-card">
      <div class="principle-title">La Soluzione: Inclinare il Plettro</div>
      <div class="principle-text">Se inclini il plettro rispetto al piano delle corde, il suo bordo attivo "scappa" automaticamente verso l'alto o verso il basso dopo ogni colpo ‚Äî senza sforzo. Questo √® il pick slanting. Non √® una trucco: √® la meccanica fisica che usano tutti i grandi shredder, spesso senza saperlo.</div>
    </div>

    <!-- SEZIONE 2: I TRE TIPI -->
    <div style="font-size:0.82rem;font-weight:700;color:var(--text2);margin:16px 0 10px;text-transform:uppercase;letter-spacing:0.5px">I Tre Tipi di Pick Slanting</div>

    <div class="ex-card" id="excard-ps-dps">
      <div class="ex-header" onclick="toggleEx('ps-dps')">
        <div class="ex-header-left">
          <div class="ex-id">TIPO 1</div>
          <div class="ex-title">DPS ‚Äî Downward Pick Slanting</div>
          <span class="ex-technique">Discendente</span>
        </div>
        <div class="ex-chevron">‚ñº</div>
      </div>
      <div class="ex-body">
        <div class="tip-box" style="margin-top:0">
          <strong>Come si fa:</strong> Il bordo superiore del plettro √® inclinato verso la chitarra, il bordo inferiore si allontana. Visto di lato sembra uno "/" (slash).<br><br>
          <strong>Cosa succede:</strong> Dopo ogni UP stroke il plettro scappa verso l'alto, al di sopra del piano delle corde. Questo significa che i cambi di corda in direzione <em>ascendente</em> (da corda bassa a corda alta) avvengono dopo un UP stroke ‚Äî e sono fluidi.<br><br>
          <strong>Limite:</strong> I cambi di corda in discesa (da corda alta a bassa) avvengono dopo un DOWN stroke ‚Äî e l√¨ il plettro √® intrappolato sotto la corda. Devi "scavare", quindi questo movimento √® pi√π difficile.<br><br>
          <strong>Chi lo usa:</strong> Eric Johnson, John Petrucci (parzialmente), molti chitarristi di rock classico.<br><br>
          <strong>Quando usarlo:</strong> Pattern che finiscono su un numero pari di note per corda (2, 4...) e cambiano corda andando verso l'acuto.
        </div>
      </div>
    </div>

    <div class="ex-card" id="excard-ps-ups">
      <div class="ex-header" onclick="toggleEx('ps-ups')">
        <div class="ex-header-left">
          <div class="ex-id">TIPO 2</div>
          <div class="ex-title">UPS ‚Äî Upward Pick Slanting</div>
          <span class="ex-technique">Ascendente</span>
        </div>
        <div class="ex-chevron">‚ñº</div>
      </div>
      <div class="ex-body">
        <div class="tip-box" style="margin-top:0">
          <strong>Come si fa:</strong> L'opposto del DPS. Il bordo inferiore del plettro √® inclinato verso la chitarra. Visto di lato sembra un "\" (backslash).<br><br>
          <strong>Cosa succede:</strong> Dopo ogni DOWN stroke il plettro scappa verso il basso, al di sotto del piano delle corde. I cambi di corda in direzione <em>discendente</em> (da corda alta a bassa) avvengono dopo un DOWN stroke ‚Äî fluidi.<br><br>
          <strong>Limite:</strong> Speculare al DPS: i cambi in ascesa sono difficili.<br><br>
          <strong>Chi lo usa:</strong> Yngwie Malmsteen (quasi esclusivamente UPS), molti chitarristi neoclassici.<br><br>
          <strong>Quando usarlo:</strong> Pattern che scendono attraverso le corde, o lick che finiscono sempre su un DOWN stroke prima del cambio.
        </div>
      </div>
    </div>

    <div class="ex-card" id="excard-ps-twps">
      <div class="ex-header" onclick="toggleEx('ps-twps')">
        <div class="ex-header-left">
          <div class="ex-id">TIPO 3</div>
          <div class="ex-title">TWPS ‚Äî Two Way Pick Slanting</div>
          <span class="ex-technique">‚≠ê Il pi√π potente</span>
        </div>
        <div class="ex-chevron">‚ñº</div>
      </div>
      <div class="ex-body">
        <div class="tip-box" style="margin-top:0">
          <strong>Cos'√®:</strong> La capacit√† di alternare automaticamente tra DPS e UPS in base alla direzione del cambio di corda. Il polso ruota leggermente ad ogni cambio di direzione.<br><br>
          <strong>La magia:</strong> Con il TWPS puoi suonare qualsiasi numero di note per corda (2, 3, 4, 5...) in qualsiasi direzione senza incagliarti mai. √à la tecnica che sblocca il 3NPC (3 note per corda) ad alta velocit√† ‚Äî e quindi Another Day.<br><br>
          <strong>Perch√© il 3NPC √® difficile:</strong> Con 3 note per corda, il cambio avviene sempre dopo un UP stroke in salita e dopo un DOWN stroke in discesa (o viceversa ‚Äî dipende da dove inizi). Senza TWPS automatico, ad alta velocit√† questi cambi "dispari" diventano ingestibili.<br><br>
          <strong>Come si sviluppa:</strong> Non si impara coscientemente inclinando il polso ‚Äî si sviluppa con la ripetizione di esercizi 3NPC lenti e puliti. Il cervello automatizza la rotazione. Puoi accelerare il processo guardandoti suonare (specchio o video) e verificando che il polso si muova.<br><br>
          <strong>Chi lo usa:</strong> John Petrucci, Frank Gambale, Guthrie Govan ‚Äî praticamente tutti i chitarristi tecnici moderni che suonano veloce e pulito.<br><br>
          <strong>Segnale che ce l'hai:</strong> Il 3NPC su e gi√π suona ugualmente pulito in entrambe le direzioni, e i cambi di corda sono inudibili.
        </div>
      </div>
    </div>

    <!-- SEZIONE 3: ESCAPE STROKES -->
    <div style="font-size:0.82rem;font-weight:700;color:var(--text2);margin:16px 0 10px;text-transform:uppercase;letter-spacing:0.5px">Escape Strokes ‚Äî Il Meccanismo Fisico</div>

    <div class="principle-card">
      <div class="principle-title">Down Escape (DE)</div>
      <div class="principle-text">Il plettro, dopo il colpo, si sposta verso il basso rispetto al piano delle corde ‚Äî "scappa" verso il basso. Utile per cambiare corda verso le corde gravi (da e verso E) dopo un DOWN stroke. Tipico del UPS.</div>
    </div>

    <div class="principle-card">
      <div class="principle-title">Up Escape (UE)</div>
      <div class="principle-text">Il plettro dopo il colpo si sposta verso l'alto ‚Äî "scappa" verso l'alto. Utile per cambiare corda verso le corde acute (da E verso e) dopo un UP stroke. Tipico del DPS.</div>
    </div>

    <div class="principle-card">
      <div class="principle-title">Double Escape (DBX)</div>
      <div class="principle-text">Il plettro descrive una piccola curva a U: scappa sia verso l'alto che verso il basso. Permette cambi di corda dopo qualsiasi stroke. √à tecnicamente pi√π impegnativo ma d√† massima libert√†. Usato nei pattern a numero dispari di note per corda (1NPC, 3NPC) senza cambiare slant.</div>
    </div>

    <!-- SEZIONE 4: PETRUCCI E IL 3NPC -->
    <div style="font-size:0.82rem;font-weight:700;color:var(--text2);margin:16px 0 10px;text-transform:uppercase;letter-spacing:0.5px">Petrucci e il 3NPC ‚Äî Another Day nel Dettaglio</div>

    <div class="ex-card" id="excard-ps-anotherday">
      <div class="ex-header" onclick="toggleEx('ps-anotherday')">
        <div class="ex-header-left">
          <div class="ex-id">ANALISI</div>
          <div class="ex-title">Perch√© Another Day √® Difficile</div>
          <span class="ex-technique">3NPC + Sestine</span>
        </div>
        <div class="ex-chevron">‚ñº</div>
      </div>
      <div class="ex-body">
        <div class="tip-box" style="margin-top:0">
          <strong>Il ritmo:</strong> Sestine di trentaduesimi. Vuol dire 6 note per ogni beat. A 138 BPM (il tempo di Another Day) stai suonando 138 √ó 6 = 828 note al minuto. Equivale a sedicesimi a 207 BPM ‚Äî uno dei run pi√π veloci del repertorio rock mainstream.<br><br>
          <strong>Il pattern:</strong> Scala di La minore naturale in 3NPC (3 note per corda), posizione 12¬™. Sale attraverso 4-6 corde consecutive senza fermarsi.<br><br>
          <strong>Il problema meccanico:</strong> Con 3 note per corda il cambio di corda avviene sempre su un stroke diverso ad ogni corda. Salendo: la 1¬™ e la 3¬™ corda cambiano dopo UP, la 2¬™ e la 4¬™ dopo DOWN. Senza TWPS automatico, ad alta velocit√† questi cambi "dispari" diventano ingestibili.<br><br>
          <strong>La soluzione di Petrucci:</strong> TWPS fluido sviluppato in decenni di pratica. Il polso ruota impercettibilmente ad ogni cambio di corda. Da fuori sembra che suoni "piatto" ma non lo √®.<br><br>
          <strong>Come arrivarci tu:</strong> Il programma ti porta l√¨ in 4 mesi. Prima consolidi il 3NPC a 100 BPM (gi√† ok), poi porti il TWPS a 130 BPM (Mese 1-2), poi introduci le sestine (Mese 2), poi applichi il tutto in posizione 12¬™ (Mese 3-4). Non esiste una scorciatoia ‚Äî ma esiste un percorso preciso.
        </div>
      </div>
    </div>

    <!-- SEZIONE 5: AUTODIAGNOSI -->
    <div style="font-size:0.82rem;font-weight:700;color:var(--text2);margin:16px 0 10px;text-transform:uppercase;letter-spacing:0.5px">Autodiagnosi ‚Äî Come Sai se Stai Sbagliando</div>

    <div class="principle-card" style="border-left-color:var(--accent2)">
      <div class="principle-title" style="color:var(--accent2)">Senti un "click" al cambio di corda</div>
      <div class="principle-text">Il plettro si incaglia sulla corda prima del cambio. Causa: plettro piatto o pick slanting errato per quella direzione. Soluzione: rallenta di 20 BPM e focalizzati solo sul cambio specifico, non sull'intera frase.</div>
    </div>

    <div class="principle-card" style="border-left-color:var(--accent2)">
      <div class="principle-title" style="color:var(--accent2)">La discesa √® pi√π difficile della salita</div>
      <div class="principle-text">Asimmetria tipica di chi usa solo UPS o solo DPS. Devi sviluppare l'altro slant. Dedica 2 sessioni intere a suonare solo pattern discendenti, partendo da 60 BPM. La simmetria si costruisce, non arriva da sola.</div>
    </div>

    <div class="principle-card" style="border-left-color:var(--accent2)">
      <div class="principle-title" style="color:var(--accent2)">C'√® un muro fisso di BPM che non riesci a superare</div>
      <div class="principle-text">Hai un plateau? Quasi sempre non √® un problema di forza o velocit√† ‚Äî √® un problema meccanico. Il plettro fa qualcosa di inefficiente che a bassa velocit√† non noti ma ad alta velocit√† esplode. Registrati e guarda la mano destra in slow motion. Cerca dove il movimento diventa improvvisamente rigido.</div>
    </div>

    <div class="principle-card" style="border-left-color:var(--accent2)">
      <div class="principle-title" style="color:var(--accent2)">Suona pulito ma senza dinamica</div>
      <div class="principle-text">Meccanicamente ok, musicalmente morto. Il pick slanting corretto riduce lo sforzo fisico ‚Äî ma devi reindirizzare quell'energia risparmiata verso le dinamiche. Nota pi√π forte, nota pi√π piano, accenti, sfumature. Velocit√† senza espressivit√† √® tecnica acrobatica, non musica.</div>
    </div>

  </div>

  <!-- MONTH PAGES (generati da JS) -->
  <div class="page" id="page-m1"></div>
  <div class="page" id="page-m2"></div>
  <div class="page" id="page-m3"></div>
  <div class="page" id="page-m4"></div>
  <div class="page" id="page-melodic"></div>
  <div class="page" id="page-backing"></div>
  <div class="page" id="page-progress"></div>
</main>

<!-- METRONOME BAR -->
<div class="metronome-card">
  <div class="metro-pulse" id="metroPulse"></div>
  <div class="metro-bpm-display" id="metroBpmDisplay">80</div>
  <div class="metro-controls">
    <button class="metro-btn" id="metroDec">‚àí</button>
    <button class="metro-btn" id="metroInc">+</button>
    <button class="metro-btn" id="metroTap">TAP</button>
  </div>
  <div style="display:flex;align-items:center;gap:4px;flex-shrink:0">
    <span style="font-size:0.75rem">üîà</span>
    <input type="range" id="metroVolSlider" min="0" max="1" step="0.05" value="0.5"
      style="width:60px;accent-color:var(--accent);cursor:pointer">
    <span style="font-size:0.75rem">üîä</span>
  </div>
  <button class="metro-toggle" id="metroToggle">‚ñ∂</button>
  <div class="timer-display" id="timerDisplay">--:--</div>
</div>

<script src="data.js"></script>
<script src="app.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js').catch(() => {});
  }
</script>
</body>
</html>
